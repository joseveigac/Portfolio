---
interface Props {
  speed?: number;      // Animation duration in seconds
  className?: string;  // Extra utility classes
}

const { speed = 30, className = "" } = Astro.props;
---

<div
  class={`w-[920px] inline-flex flex-nowrap overflow-hidden py-12
    mask-[linear-gradient(to_right,transparent_0,black_128px,black_calc(100%-128px),transparent_100%)]
    ${className}`}
>
  <!-- Animated track -->
  <div
    class="flex flex-nowrap animate-infinite-scroll"
    style={`--scroll-speed: ${speed}s`}
  >
    <!-- Repeat content 3 times to guarantee width -->
    <ul class="flex items-center justify-center md:justify-start [&_li]:mx-8">
      <slot />
    </ul>

    <ul class="flex items-center justify-center md:justify-start [&_li]:mx-8" aria-hidden="true">
      <slot />
    </ul>

    <ul class="flex items-center justify-center md:justify-start [&_li]:mx-8" aria-hidden="true">
      <slot />
    </ul>
  </div>
</div>

<style>
  @keyframes infinite-scroll {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-33.333%);
    }
  }

  .animate-infinite-scroll {
    animation: infinite-scroll var(--scroll-speed, 30s) linear infinite;
    will-change: transform;
  }
</style>
