---
export interface Props {
  title: string;
  description: string;
  date: string;
  link?: string;   // Ãºnico link (empresa)
  icon?: string;
  company?: string;
}

const { title, description, date, icon, link, company } = Astro.props;
---

<!-- Timeline dot -->
<div class="absolute w-3 h-3 bg-gray-200 rounded-full mt-1.5 -start-1.5 border border-white dark:border-gray-900 dark:bg-gray-200"></div>

<!-- Date -->
<time class="mb-1 text-sm font-normal leading-none text-gray-400 dark:text-gray-500">
  {date}
</time>

<!-- Title + Icon -->
<h3 class="mt-2 mb-3 flex items-center gap-2 text-lg font-semibold text-sky-300">
  {icon && (
    link ? (
      <a
        href={link}
        target="_blank"
        rel="noopener noreferrer"
        aria-label={`${title} website`}
        class="flex items-center justify-center size-8 rounded-full overflow-hidden bg-gray-800
               transition hover:scale-105 hover:ring-2 hover:ring-sky-300/40
               focus:outline-none focus:ring-2 focus:ring-sky-300/50"
      >
        <img
          src={icon}
          alt=""
          class="w-full h-full object-cover"
          loading="lazy"
        />
      </a>
    ) : (
      <span class="flex items-center justify-center size-8 rounded-full overflow-hidden bg-gray-800">
        <img
          src={icon}
          alt=""
          class="w-full h-full object-cover"
          loading="lazy"
        />
      </span>
    )
  )}

  {title}
</h3>

<!-- Description -->
<p class="text-base font-normal text-gray-500 dark:text-gray-400 whitespace-pre-line leading-relaxed">
  {description}
</p>

<!-- Company website link (NEW DESIGN) -->
{link && (
  <a
    href={link}
    target="_blank"
    rel="noopener noreferrer"
    class="mt-3 inline-flex items-center gap-1 text-sm text-sky-300/80
           hover:text-sky-300 transition"
  >
    {company ?? 'Company website'}
    <svg
      class="w-3.5 h-3.5"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M13.5 6H19.5V12M10.5 13.5L19.5 6M18 18H6V6H12"
      />
    </svg>
  </a>
)}
